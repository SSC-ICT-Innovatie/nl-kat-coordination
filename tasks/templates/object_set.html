{% extends "layouts/base.html" %}

{% load static %}
{% load i18n %}

{% block content %}
    {% include "header.html" %}

    <main id="main-content">
        <section>
            <div class="introduction">
                <div>
                    <h1>Object set: {{ objectset.name }}</h1>
                    <p>{% translate objectset.description %}</p>
                </div>
                <div class="horizontal-view toolbar">
                    <a class="button" href="{% url 'edit_object_set' pk=objectset.id %}">
                        <span aria-hidden="true" class="icon ti-pencil"></span>{% translate "Edit" %}
                    </a>
                </div>
            </div>
            <div>
                <h2>{% translate "Query" %}</h2>
                <p>
                    {% if objectset.object_query %}
                        <code>{{ objectset.object_query }}</code>
                    {% elif objectset.object_query == "" %}
                        {% translate "The query is empty, so all objects of type" %} <strong>{{ objectset.object_type.model }}</strong> {% translate "are in this set." %}
                    {% else %}
                        {% translate "No query present" %}
                    {% endif %}
                </p>
            </div>
            {% if objects %}
                <div>
                    <h2>{% translate "Preview" %}</h2>
                    <ul>
                        {% for object in objects %}
                            {% with model_name=object|to_class_name|lower url=object.get_absolute_url %}
                                <li>
                                    {% if url %}
                                        <a href="{{ object.get_absolute_url }}">{{ object }}</a>
                                    {% else %}
                                        {{ object }}
                                    {% endif %}
                                </li>
                            {% endwith %}
                        {% endfor %}
                    </ul>
                </div>
            {% endif %}
            <div>
                <h2>{% translate "Static Objects" %}</h2>
                {% if static_objects %}
                    <ul>
                        {% for object in static_objects %}
                            <li>
                                {% with model_name=object|to_class_name|lower url=object.get_absolute_url %}
                                    {% if url %}
                                        <a href="{{ url }}">{{ object }}</a>
                                    {% else %}
                                        {{ object }}
                                    {% endif %}
                                {% endwith %}
                            </li>
                        {% endfor %}
                    </ul>
                {% else %}
                    <p>{% translate "No static objects." %}</p>
                {% endif %}
            </div>
        </section>
    </main>
{% endblock content %}
